webpackJsonp([51],{0:function(e,n,t){"use strict";t(83);var o=t(1),i=t(3),a=t(5),s=t(6),u=t(4),c=t(19);o.prepare({requireLogin:!0},function(){o.changeTitle("新人礼包");var e="领取88元大礼包",n="查看88元大礼包",r="您已成功领取88元大礼包!",f="领取失败",h=c.NEWBEE_GIFT_DATA.COUPON_BATCH_IDS;2!=s.shop.shopID&&(h=c.NEWBEE_GIFT_DATA.COUPON_BATCH_IDS_TEST);var p,b=null,l=!0,v=function(t){b=avalon.define({$id:"newbeeGift",buttonMessage:null,visible:!1,hasTaken:t,receiveGift:function(){b.hasTaken?a.forward("coupons.html"):b.receiveCoupons()},receiveCoupons:function(){var e={batch_ids:h};o.apiRequest("POST","coupon_batch/take",e,function(e){b.hasTaken=!0,b.buttonMessage=n,o.showToast(r)},function(){o.showToast(f)})}}),b.hasTaken?b.buttonMessage=n:b.buttonMessage=e},T=function(e){u(".loadImage").each(function(){return 0===this.height?(l=!1,!1):void 0}),l?(clearTimeout(p),o.call(e)):(l=!0,p=setTimeout(function(){T(e)},500))},g=function(){var e=u(".newbee-gift-bottom").height(),n=e/3.5+"px",o=e/2+"px",a=u(".newbee-coupon-list").height()+e/2+20;u(".newbee-gift-bear").css({top:n}),u(".newbee-coupon-list").css({top:o});var s=a>e?a:e;u(".newbee-top-view").css({height:s}),avalon.scan(),b.visible=!0,i.hide();var c={before:!1,position:".newbee-top-view"};t(63)(function(e){e.load(c)})},_=function(){o.apiRequest("GET",w(),null,function(e){var n=1==e.result;v(n),T(g)},function(){v(!0),T(g)})},w=function(){for(var e="coupon_batch/is_taken",n=0;n<h.length;n++)e+=(n>0?"&":"?")+"batch_ids[]="+h[n];return e};_()})},63:function(e,n,t){t(2),e.exports=function(e,n){t.e(20,function(o){o?n():e(t(315))})}},83:function(e,n){}});