webpackJsonp([20],{315:function(o,t,s){var n=s(1),i=s(5),e=s(4);o.exports=function(){"use strict";var o={SHOW:"pullUp_show_loading",HIDE:"pullUp_hide_loading"},t={DEFAULT:"正在玩命的加载...",NO_MORE_GOODS:"没有更多商品了..."},a={NO_MORE_GOODS:"loading-text-stop"},d={ON:"loading-spin",OFF:"loading-goods-stop"},l={HIDE:{bottom:"-64px",opacity:"0.0"},SHOW:{bottom:"64px",opacity:"1.0"}},c=100,r=20,g=20,m=s(344),p=n.createNodeFromHTML(m),u=!1,v=null,f=function(o){u||(o.before?e(o.position).before(p):e(o.position).after(p),u=!0),n.apiRequest("GET","v2/ranklist",null,function(o){var t=o.goods_list;t.forEach(function(o){o.price="￥"+(parseInt(o.group.price)/100).toFixed(2)}),O(t),w(),avalon.scan(p)},function(){})},O=function(s){v=avalon.define({$id:"recommendGoods",currentList:[],goodsList:[],waitForGoodsLoading:!1,loadingClass:o.SHOW,loadingTextClass:null,loadingTxt:t.DEFAULT,loadingRotateClass:d.ON,topButtonBottom:l.HIDE.bottom,topButtonOpacity:l.HIDE.opacity,forwardGoods:function(o){i.forward("goods.html?goods_id="+o)},showGoodsLoading:function(){var s=v.currentList.length;s<v.goodsList.length&&!v.waitForGoodsLoading?(v.loadingClass=o.SHOW,v.waitForGoodsLoading=!0,v.loadingTxt=t.DEFAULT,v.loadingRotateClass=d.ON,setTimeout(function(){v.loadingRotateClass=d.OFF,v.waitForGoodsLoading=!1,v.currentList=v.currentList.concat(v.goodsList.slice(s,r+s))},c)):s>=v.goodsList.length&&(v.loadingTextClass=a.NO_MORE_GOODS,v.loadingClass=o.SHOW,v.loadingTxt=t.NO_MORE_GOODS,v.loadingRotateClass=d.OFF)}});var n=s.length;v.goodsList=s,g>=n?v.currentList=v.goodsList:v.currentList=v.goodsList.slice(0,g),setTimeout(L,1e3)},w=function(){var o=e(".go-top");o.unbind("click"),o.click(function(){event&&event.preventDefault(),document.getElementsByTagName("body")[0].scrollTop=0}),e(window).bind("scroll",L),h()},h=function(){var o=e(".recommend-goods-image").width();e(".recommend-goods-image").css("height",o)},L=function(){for(var o=e(window).scrollTop(),t=e(window).height(),s=Math.max(o-t,0),n=o+2*t,i=document.querySelectorAll(".recommend-goods-detail")||[],a=0;a<i.length;a++){var d=i[a].offsetTop;if(d>=s&&n>=d){var l=i[a].getElementsByTagName("img")[0];l&&l.dataset.url&&l.src!=l.dataset.url&&(l.src=l.dataset.url)}}T(),_()&&v.showGoodsLoading(),h()},_=function(){return e(window).scrollTop()+2*e(window).height()>e("#load_more").offset().top},T=function(){var o=2*e(window).height();v.topButtonBottom=l.HIDE.bottom,v.topButtonOpacity=l.HIDE.opacity,e(window).scrollTop()>=o&&(v.topButtonBottom=l.SHOW.bottom,v.topButtonOpacity=l.SHOW.opacity)};return{load:f}}()},344:function(o,t){o.exports='<div class="recommend-goods-container" ms-controller="recommendGoods" ms-if="currentList.length>0">\n	<div class="recommend-goods-title">热销商品</div>\n	<div class="recommend-goods-list">\n		<div class="recommend-goods-detail" ms-repeat-item="currentList" ms-click="forwardGoods(item.goods_id)">\n			<div class="recommend-goods-detail-content">\n				<img class="recommend-goods-image" src="http://pinduoduo.b0.upaiyun.com/test/default_square.jpg" ms-data-url="item.thumb_url">\n				<div class="recommend-goods-name" ms-text="item.goods_name"></div>\n				<div class="recommend-goods-price" ms-text="item.price"></div>\n			</div>\n		</div>\n	</div>\n	<div id="load_more" ms-class="{{loadingClass}}">\n		<div class="center" ms-if="loadingClass==\'pullUp_show_loading\'">\n			<span><img ms-class="img_rotate {{loadingRotateClass}}" src="assets/img/pull_loading-1e493b5612.png"/></span>\n			<span ms-class="orders_text {{loadingTextClass}}" ms-text="loadingTxt"></span>\n		</div>\n	</div>\n	<div class="go-top" ms-css-bottom="topButtonBottom" ms-css-opacity="topButtonOpacity"><span>顶部</span></div>\n</div>\n'}});