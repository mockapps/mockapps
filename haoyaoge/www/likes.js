webpackJsonp([60],{0:function(e,i,o){"use strict";o(77);var t=o(4),n=o(1),l=o(5),s=o(3);n.prepare({requireLogin:!0},function(){var e=null,i=!0,o={},a=[],r="",u="",d=t(window).width();360>d&&(u="like_low");var g=parseFloat(n.getParameter("sp"))||0,c={PNG:"unlike.png",GIF:"unlike.gif"},p=function(e){return"http://pinduoduo.b0.upaiyun.com/like/"+e},f=function(s){null==e&&(e=avalon.define({$id:"root",likes:s,likeStyle:u,noLikeVisible:!1,listVisible:"hidden",cancelLike:function(t){event.stopPropagation(),i&&(i=!1,n.apiRequest("POST","favorite/unlike/"+t.goodsID,t.goodsID,function(n){o.time=n,a.splice(a.indexOf(t.goodsID),1),o.id=a,localStorage.setItem("LIKEDATA",JSON.stringify(o)),t.likeImg=p(c.GIF),setTimeout(function(){i=!0,t.visible=!1,0==a.length&&(e.noLikeVisible=!0)},1e3)}))},selectGoods:function(e){if(e){var i={sp:t(document).scrollTop().toString(),goods_id:e},o=n.buildURL(i);l.replaceURL(o,function(){var i="goods.html?goods_id="+e;l.forward(i)})}},likeListReady:function(){document.getElementsByTagName("body")[0].scrollTop=g}}),0==s.length&&(e.noLikeVisible=!0))},m=function(){n.changeTitle("我的收藏"),o=localStorage.getItem("LIKEDATA"),o=JSON.parse(o)||{},a=o.id||[],r=o.time,n.apiRequest("GET","favorite/goods",null,function(i){var t=i.favorite_update_time,n=i.goods_list;if(r!=t){a=[],o.time=t;for(var l=0;l<n.length;l++)a.push(n[l].goods_id);o.id=a,localStorage.setItem("LIKEDATA",JSON.stringify(o))}n.reverse();for(var u=[],l=0;l<n.length;l++){var d={};d.goodsID=n[l].goods_id,d.thumb_url=n[l].thumb_url,d.goods_name=n[l].goods_name,d.salePrice=parseFloat(n[l].price/100,10).toFixed(2),d.eventDesc=n[l].customer_num+"人团",d.visible=!0,d.likeImg="http://pinduoduo.b0.upaiyun.com/like/like_high.png",u.push(d)}s.hide(),f(u),avalon.scan(),e.listVisible="visible"})};m()})},77:function(e,i){}});