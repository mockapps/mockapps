webpackJsonp([13],{51:function(e,t,i){var s=i(1),n=i(5),c=i(4);e.exports=function(){var e=i(346),t=s.createNodeFromHTML(e),r=!1,o=null,a=[],l=null,h=new Function,d=function(e){h=e},v=function(e,i){r||(document.body.appendChild(t),r=!0),l=e,r=!0,u(),s.call(i)},u=function(){localStorage.getItem("SEARCH_HISTORY")&&(a=JSON.parse(localStorage.getItem("SEARCH_HISTORY")),a.length>10&&a.splice(10,a.length-10)),m()},m=function(){if(!o){o=avalon.define({$id:"search",history:[],content:"",show:"hidden",historyExists:!0,cancelSearch:function(){o.content="",o.hide()},hide:function(){o.content="",o.show="hidden"},searchResult:function(){if(o.content.trim().length<=0)return void s.showToast("搜索内容不能为空");for(var e=o.content.trim(),t=0;t<a.length;t++)e==a[t]&&a.splice(t,1);a.unshift(e),localStorage.setItem("SEARCH_HISTORY",JSON.stringify(a));for(var t=0;t<o.history.length;t++)e==o.history[t]&&o.history.splice(t,1);o.history.unshift(e),o.history.length>0&&(o.historyExists=!0),"forward"==l?(o.hide(),n.forward("search_result.html?search_key="+e)):"reload"==l&&(o.hide(),h(e))},deleteHistory:function(){o.history=[],a=[],o.historyExists=!1,localStorage.removeItem("SEARCH_HISTORY")},searchHistory:function(e){o.content=e,o.searchResult()},clearSearchBox:function(){o.content=""}}),avalon.scan();for(var e=0;e<a.length;e++)o.history.push(a[e]);o.historyExists=o.history.length>0,c("#search-module-submit").submit(function(){return o.searchResult(),!1});var t=c(window).width()>640?640:c(window).width(),i=t-110;c(".search-box-view-main").css("width",i)}},f=function(){if(o){if(localStorage.getItem("SEARCH_HISTORY")){a=JSON.parse(localStorage.getItem("SEARCH_HISTORY"));for(var e=0;e<a.length;e++)for(var t=e+1;t<a.length;t++)a[e]==a[t]&&a.splice(t,1);localStorage.setItem("SEARCH_HISTORY",JSON.stringify(a)),a.length>10&&a.splice(10,a.length-10)}o.history=[];for(var e=0;e<a.length;e++)o.history.push(a[e]);o.historyExists=o.history.length>0}o.show="visible",c(".search-box-view-main").focus()};return{load:v,show:f,register:d}}()},346:function(e,t){e.exports='<div class="search-view-container" ms-controller="search" ms-css-visibility="show">\n    <div class="search-view-top">\n        <form onsubmit=false id="search-module-submit">\n            <input type="search" style="-webkit-appearance: none" class="search-box-view-main" placeholder="请输入您要搜索的商品名称" ms-duplex="content">\n        </form>\n        <div class="search-view-icon"></div>\n        <div class="search-content-clear" ms-click="clearSearchBox"></div>\n        <div class="cancel-container-view" ms-click="cancelSearch">\n            <div class="cancel-button-view">取消</div>\n        </div>\n    </div>\n    <div class="search-main-view" ms-if="historyExists">\n        <div class="search-recent-title-view">历史搜索</div>\n        <div class="search-recent-delete-view" ms-click="deleteHistory">\n            <div class="delete-recent-search"></div>\n        </div>\n        <div class="search-recent-list-view">\n            <span ms-repeat-item="history" ms-text="item" class="recent-history-list" ms-click="searchHistory(item)"></span>\n        </div>\n    </div>\n</div>\n'}});