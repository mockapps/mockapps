webpackJsonp([55],{0:function(t,e,n){n(87);var o=n(1),r=n(5),a=n(3),i=(n(13),n(7)),u=n(4),s={TITLE:"每日秒杀",TEXT:"全球正品好货，整点低价抢购！数量有限，先到先得！",IMG_URL:"http://pinduoduo.b0.upaiyun.com/share/spike.jpg",WATERMARK:i.WaterMark.Transparent};o.prepare({requireLogin:!1,shareInfo:{title:s.TITLE,message:s.TEXT,thumbnailURL:s.IMG_URL,shareURL:location.href,waterMark:s.WATERMARK,forceShareToWeChatTimeline:!0}},function(){"use strict";var t,e="即将开始",n="已售罄",s="马上抢",l="开始时间",c="剩余数量",_=(o.getParameter("event_type")||i.EVENT_TYPE.SPIKE,null),d=function(t){return 10>t?"0"+t:t};o.changeTitle("每日秒杀");var p=function(t,e){return t.start_time>e.start_time?1:-1},f=function(e){for(var n=[],o=[],r=[],a=0;a<e.length;a++){var i=e[a].quantity,u=e[a].cached_num;i=u>0?u:i,e[a].start_time>t?o.push(e[a]):0>=i?r.push(e[a]):n.push(e[a])}o.sort(p);var s=n.concat(o).concat(r);return s},m=function(o){o=f(o);for(var r=[],a=0;a<o.length;a++){var i,u=new Object,_=1e3*o[a].start_time,p=new Date(_),m=1e3*t,g=o[a].quantity;_>m?(u.if_on_sale=!1,u.buy_button=e,u.button_class="lottery_buy_button_come",u.depend=l,i=p,u.day=i.getDate(),u.month=i.getMonth()+1,u.hour=d(i.getHours()),u.minute=d(i.getMinutes())):0>=g?(u.if_on_sale=!0,u.buy_button=n,u.button_class="lottery_buy_button_off",u.depend=c,u.quantity=n):(u.if_on_sale=!0,u.buy_button=s,u.button_class="lottery_buy_button_on",u.depend=c,u.quantity=g+"件"),u.pic_src=o[a].thumb_url,u.goods_name=o[a].goods_name,u.sale_price=(o[a].price/100).toFixed(2),u.market_price=(o[a].market_price/100).toFixed(2),u.goods_id=o[a].goods_id,r.push(u)}b(r)},b=function(t){return null!=_?void(_.lottery_list=t):void(_=avalon.define({$id:"root",lottery_list:t,lotteryBack:function(){r.back()},selectGoods:function(t){var e={sp:u(document).scrollTop().toString(),goods_id:t},n=o.buildURL(e);r.replaceURL(n,function(){r.forward("goods.html?goods_id="+t)})}}))},g=null,h=function(){null==g&&(g={sp:parseFloat(o.getParameter("sp")||0)},r.replaceURL(o.buildURL({sp:null,goods_id:null})));var e="spike_list";o.apiRequest("GET",e,null,function(e){var n=e.goods;t=e.server_time,a.hide(),m(n),avalon.scan(),g&&g.sp>0&&(document.getElementsByTagName("body")[0].scrollTop=g.sp,g.sp=0)},function(){a.hide()})};h(),window.setInterval(h,1e4)})},87:function(t,e){}});